---
title: vibekit local exec
description: "Execute commands in sandbox environments"
---

## Overview

The `vibekit local exec` command runs shell commands inside a sandbox environment. It supports real-time streaming, background execution, and output capture.

## Syntax

```bash
vibekit local exec [options]
```

## Options

| Option | Alias | Description | Default |
|--------|-------|-------------|---------|
| `--env <name>` | `-e` | Environment name or ID | Interactive prompt |
| `--command <cmd>` | `-c` | Command to execute | Interactive prompt |
| `--timeout <ms>` | `-t` | Timeout in milliseconds | 30000 (30s) |
| `--background` | `-b` | Run in background | false |
| `--stream` | | Enable streaming output | false |
| `--save-output <file>` | | Save output to file | None |

## Examples

### Basic Command Execution

Run a simple command:
```bash
vibekit local exec -e my-env -c "ls -la"
```

Interactive mode (prompts for environment and command):
```bash
vibekit local exec
```

### Package Management

Install dependencies:
```bash
# npm
vibekit local exec -e my-env -c "npm install"

# yarn
vibekit local exec -e my-env -c "yarn install"

# pip
vibekit local exec -e my-env -c "pip install -r requirements.txt"
```

With streaming for long operations:
```bash
vibekit local exec -e my-env -c "npm install" --stream
```

### Running Tests

Execute test suites:
```bash
# JavaScript/Node.js
vibekit local exec -e my-env -c "npm test" --timeout 300000

# Python
vibekit local exec -e my-env -c "pytest" --stream

# Go
vibekit local exec -e my-env -c "go test ./..." --save-output test-results.json
```

### Development Servers

Start development servers:
```bash
# Start in background
vibekit local exec -e my-env -c "npm run dev" --background

# With streaming logs
vibekit local exec -e my-env -c "npm start" --stream

# With custom timeout for long-running
vibekit local exec -e my-env -c "python manage.py runserver" --timeout 0
```

### Build Processes

Run build commands:
```bash
# Frontend build
vibekit local exec -e my-env -c "npm run build" --stream

# Docker build
vibekit local exec -e my-env -c "docker build -t myapp ." --timeout 600000

# Multi-step build
vibekit local exec -e my-env -c "npm run clean && npm run build && npm run package"
```

## Command Execution

### Shell Processing

Commands are executed using the default shell (`/bin/sh`). For shell-specific features:

```bash
# Bash-specific
vibekit local exec -e my-env -c "bash -c 'source ~/.bashrc && npm start'"

# Using environment variables
vibekit local exec -e my-env -c "NODE_ENV=production npm run build"

# Pipes and redirects
vibekit local exec -e my-env -c "cat package.json | jq '.dependencies'"
```

### Working Directory

Commands execute in the environment's working directory (default: `/vibe0`):

```bash
# Check working directory
vibekit local exec -e my-env -c "pwd"

# Change directory within command
vibekit local exec -e my-env -c "cd src && npm test"
```

### Multiple Commands

Chain commands:
```bash
# Using && (stops on error)
vibekit local exec -e my-env -c "npm install && npm test && npm build"

# Using ; (continues on error)
vibekit local exec -e my-env -c "npm test; npm run lint; npm audit"

# Using || (fallback)
vibekit local exec -e my-env -c "npm test || echo 'Tests failed'"
```

## Output Handling

### Standard Output

Default behavior shows output after completion:
```
âœ… Command completed (exit code: 0)

ðŸ“¤ STDOUT:
Hello from the sandbox!
Files listed successfully.

ðŸ“¤ STDERR:
npm WARN optional dependency...
```

### Streaming Output

With `--stream` flag, output appears in real-time:
```bash
vibekit local exec -e my-env -c "npm install" --stream
ðŸ“¤ npm install
ðŸ“¤ added 150 packages from 80 contributors
ðŸ“¤ found 0 vulnerabilities
```

### Saving Output

Capture output to file:
```bash
# Save all output
vibekit local exec -e my-env -c "npm audit" --save-output audit-report.json

# Output file format:
{
  "command": "npm audit",
  "exitCode": 0,
  "stdout": "...",
  "stderr": "...",
  "timestamp": "2024-01-15T10:30:00Z",
  "environment": "my-env"
}
```

## Timeout Configuration

### Setting Timeouts

```bash
# 60 seconds
vibekit local exec -e my-env -c "npm test" --timeout 60000

# 5 minutes
vibekit local exec -e my-env -c "npm run integration-tests" --timeout 300000

# No timeout (for servers)
vibekit local exec -e my-env -c "npm run dev" --timeout 0
```

### Common Timeout Values

| Task | Recommended Timeout |
|------|-------------------|
| Quick commands | 30000 (30s) - default |
| Package install | 120000 (2m) |
| Test suites | 300000 (5m) |
| Builds | 600000 (10m) |
| Dev servers | 0 (no timeout) |

## Background Execution

Run commands without waiting:
```bash
# Start server in background
vibekit local exec -e my-env -c "npm run server" --background

# Background with streaming (shows initial output)
vibekit local exec -e my-env -c "python app.py" --background --stream
```

Note: Background processes continue until the environment is stopped or deleted.

## Error Handling

### Exit Codes

The command preserves the exit code from the executed command:

```bash
# Check exit code
vibekit local exec -e my-env -c "exit 42"
# Output: âœ… Command completed (exit code: 42)

# Use in scripts
if vibekit local exec -e my-env -c "npm test"; then
  echo "Tests passed"
else
  echo "Tests failed"
fi
```

### Error Output

Errors are captured in stderr:
```bash
vibekit local exec -e my-env -c "ls /nonexistent"
# Shows error in STDERR section
```

## Advanced Usage

### Environment Variables

Access environment variables:
```bash
# Print all variables
vibekit local exec -e my-env -c "env"

# Use specific variable
vibekit local exec -e my-env -c 'echo "Running in $NODE_ENV mode"'
```

### File Operations

Work with files:
```bash
# Create file
vibekit local exec -e my-env -c "echo 'Hello' > test.txt"

# Read file
vibekit local exec -e my-env -c "cat test.txt"

# Process files
vibekit local exec -e my-env -c "find . -name '*.js' -exec eslint {} +"
```

### Network Operations

Network commands:
```bash
# Check connectivity
vibekit local exec -e my-env -c "curl -I https://api.example.com"

# Download files
vibekit local exec -e my-env -c "wget https://example.com/file.zip"

# API calls
vibekit local exec -e my-env -c "curl -X POST -d '{\"test\":true}' http://localhost:3000/api"
```

## Scripting

### Batch Operations

Execute in multiple environments:
```bash
#!/bin/bash
for env in $(vibekit local list --json | jq -r '.[].name'); do
  echo "Running tests in $env"
  vibekit local exec -e "$env" -c "npm test" --save-output "test-$env.json"
done
```

### Conditional Execution

```bash
# Run different commands based on environment
if vibekit local exec -e my-env -c "test -f package.json"; then
  vibekit local exec -e my-env -c "npm install"
elif vibekit local exec -e my-env -c "test -f requirements.txt"; then
  vibekit local exec -e my-env -c "pip install -r requirements.txt"
fi
```

### Output Processing

```bash
# Extract version
version=$(vibekit local exec -e my-env -c "node --version" | grep -o 'v[0-9.]*')

# Parse JSON output
deps=$(vibekit local exec -e my-env -c "cat package.json" | jq '.dependencies | keys[]')
```

## Performance Tips

1. **Use streaming** for long-running commands to see progress
2. **Set appropriate timeouts** to avoid hanging
3. **Run heavy tasks in background** when possible
4. **Save output for large results** instead of printing to terminal
5. **Batch similar commands** to reduce overhead

## Troubleshooting

### Command Not Found

```bash
# Check if command exists
vibekit local exec -e my-env -c "which npm"

# Install missing tools
vibekit local exec -e my-env -c "apt-get update && apt-get install -y curl"
```

### Permission Denied

```bash
# Make script executable
vibekit local exec -e my-env -c "chmod +x script.sh"

# Run with proper permissions
vibekit local exec -e my-env -c "sudo npm install -g typescript"
```

### Timeout Issues

```bash
# Increase timeout for slow commands
vibekit local exec -e my-env -c "npm install" --timeout 300000

# Use no timeout for servers
vibekit local exec -e my-env -c "npm run dev" --timeout 0
```

### Output Too Large

```bash
# Save to file instead
vibekit local exec -e my-env -c "npm list" --save-output deps.json

# Pipe to file within command
vibekit local exec -e my-env -c "find . -type f > files.txt"
```

## Best Practices

1. **Quote complex commands** to avoid shell interpretation issues
2. **Use streaming** for commands with progressive output
3. **Save output** for commands that produce lots of data
4. **Set realistic timeouts** based on expected duration
5. **Check exit codes** in automation scripts

## Related Commands

- [`vibekit local create`](/cli/commands/local/create) - Create environments to execute in
- [`vibekit local connect`](/cli/commands/local/connect) - Interactive shell access
- [`vibekit local generate`](/cli/commands/local/generate) - Generate code before executing
- [`vibekit local logs`](/cli/commands/local/logs) - View execution history